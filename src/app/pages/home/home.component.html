<div class="home-container" *ngIf="!id">
  <div class="home">
    <div class="home-content">
      <div class="home-body">
        <div class="post" *ngFor="let post of posts">
          <div class="post-content">
            <div class="post-header">
              <i class="fa fa-briefcase left-icon" aria-hidden="true"></i>
              <h1 class="post-title">{{post.title}}</h1>
              <span class="post-location">a {{checkPostLocation(post)}}</span>
            </div>
            <div class="post-body">
              <div class="post-informations">
                <span class="label">TITOLO: </span><span class="content">{{post.title}}</span>
              </div>
              <div class="post-informations">
                <span class="label">DETTAGLI: </span><span class="content">{{post.description}}</span>
              </div>
              <div class="post-informations">
                <span class="label">DESCRIZIONE: </span><span class="content">{{post.description}}</span>
              </div>
              <div class="divider"></div>
              <div class="row">
                <div class="col-md-4">
                  <div class="post-customer">
                    <div class="info">
                      <span class="label">COGNOME: </span><span class="content">{{checkCustomerLastname(post)}}</span>
                    </div>
                    <div class="info">
                      <span class="label">NOME: </span><span class="content">{{checkCustomerFirstname(post)}}</span>
                    </div>
                    <div class="info">
                      <span class="label">EMAIL: </span><span class="content">h******@gmail.com</span>
                    </div>
                    <div class="info">
                      <span class="label">TELEFONO: </span><span class="content">345******09</span>
                    </div>
                    <div class="info">
                      <span class="label">COMUNE: </span><span class="content">Busto Arsizio (Varese)</span>
                    </div>
                    <div class="info">
                      <span class="label">INDIRIZZO: </span><span class="content">Via ****** **</span>
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="post-timer">
                    <span class="title">CHIUSURA RICHIESTA TRA:</span>
                    <div class="timer">
                      <span class="hours">{{getCountDownHours(post)}}</span><span class="dots">:</span><span class="minutes">{{getCountDownMinutes(post)}}</span><span class="dots">:</span><span class="seconds">{{getCountDownSeconds(post)}}</span>
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="post-actions">
                    <span class="title">ACQUISTA CONTATTO</span>
                    <div class="action" (click)="previewPurchase(post); commonService.disableScroll()"><span class="title">ACQUISTA</span><span class="price">1€</span></div>
                    <!-- <button type="button" class="btn" name="button" (click)="previewPurchase(post); commonService.disableScroll()">ACQUISTA<span>1€</span></button> -->
                    <span class="bottom-message">iva inclusa</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="post-footer">
              <div class="post-message">
                <span>Dopo aver acquistato la richiesta, riceverai via e-mail i dati completi di questo utente.</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="popup-container" *ngIf="selected_post" [ngStyle]="{'display' : popup==='PREVIEW_PURCHASE_CONTACT_POPUP' ? 'block' : 'none'}">
  <div class="popup-shadow" [ngStyle]="{'display' : popup ? 'block' : 'none'}" (click)="popup=null; commonService.enableScroll()"></div>
  <div class="popup contact">
    <div class="popup-loader" *ngIf="PurchaseState.loading">
      <i class="fa fa-circle-o-notch animate loader"></i>
    </div>
    <div class="popup-content">
      <div class="popup-nav">
        <button type="button" class="close" (click)="popup=null; commonService.enableScroll()">&times;</button>Anteprima della richiesta
      </div>
      <div class="popup-header">
        <h3 class="post-title">{{selected_post.title}}</h3>
      </div>
      <div class="popup-body">
        <div class="row">
          <div class="col-md-12">
            <div class="info">
              <span class="label label_mobile">DETTAGLI: </span><span class="content content_mobile">{{selected_post.description}}</span>
            </div>
          </div>
          <div class="col-md-6">
            <div class="info">
              <span class="label">COGNOME: </span><span class="content">Bregu</span>
            </div>
            <div class="info">
              <span class="label">NOME: </span><span class="content">Harald</span>
            </div>
            <div class="info">
              <span class="label">EMAIL: </span><span class="content">h********@gmail.com</span>
            </div>
            <div class="info">
              <span class="label">TELEFONO: </span><span class="content">324*****09</span>
            </div>
          </div>
          <div class="col-md-6">
            <div class="info">
              <span class="label">COMUNE: </span><span class="content">Busto Arsizio (Varese)</span>
            </div>
            <div class="info">
              <span class="label">INDIRIZZO: </span><span class="content">Via ****** **</span>
            </div>
          </div>
        </div>
      </div>
      <div class="popup-footer">
        <div class="error-container" *ngIf="PurchaseState.error">
          <span class="error">{{PurchaseState.error}}</span>
        </div>
        <div class="row">
          <div class="col-md-6">
            <p class="description-purchase">ACQUISTA PER PRIMO QUESTA RICHIESTA</p>
            <p class="description-small"><i>Questo è un esempio di richieste</i></p>
          </div>
          <div class="col-md-6">
            <div class="post-timer">
              <div class="row">
                <div class="col-md-5">
                  <span class="text">Acquista prima della scadenza:</span>
                </div>
                <div class="col-md-7">
                  <div class="timer">
                    <span class="hours">{{getCountDownHours(selected_post)}}</span><span class="dots">:</span><span class="minutes">{{getCountDownMinutes(selected_post)}}</span><span class="dots">:</span><span class="seconds">{{getCountDownSeconds(selected_post)}}</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="action" (click)="purchase(selected_post)">
              <span class="title">ACQUISTA</span><span class="price">1€</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="popup-container" *ngIf="selected_post" [ngStyle]="{'display' : popup==='PURCHASED_CONTACT_POPUP' ? 'block' : 'none'}">
  <div class="popup-shadow" [ngStyle]="{'display' : popup ? 'block' : 'none'}" (click)="popup=null; commonService.enableScroll()"></div>
  <div class="popup contact">
    <div class="popup-loader" *ngIf="PurchaseState.loading">
      <i class="fa fa-circle-o-notch animate loader"></i>
    </div>
    <div class="popup-content">
      <div class="popup-nav">
        <button type="button" class="close" (click)="popup=null; commonService.enableScroll()">&times;</button>Contatto acquistato
      </div>
      <div class="popup-header">
        <h3 class="post-title">{{selected_post.title}}</h3>
      </div>
      <div class="popup-body">
        <div class="row">
          <div class="col-md-12">
            <div class="info">
              <span class="label">DETTAGLI: </span><span class="content">{{selected_post.description}}</span>
            </div>
          </div>
          <div class="col-md-6">
            <div class="info">
              <span class="label">COGNOME: </span><span class="content">Bregu</span>
            </div>
            <div class="info">
              <span class="label">NOME: </span><span class="content">Harald</span>
            </div>
            <div class="info">
              <span class="label">EMAIL: </span><span class="content">harald.bregu@gmail.com</span>
            </div>
            <div class="info">
              <span class="label">TELEFONO: </span><span class="content">3243456709</span>
            </div>
          </div>
          <div class="col-md-6">
            <div class="info">
              <span class="label">COMUNE: </span><span class="content">Busto Arsizio (Varese)</span>
            </div>
            <div class="info">
              <span class="label">INDIRIZZO: </span><span class="content">Via Pirandello 44</span>
            </div>
          </div>
        </div>
      </div>
      <div class="popup-footer">
        <div class="error-container" *ngIf="PurchaseState.error">
          <span class="error">{{PurchaseState.error}}</span>
        </div>
        <div class="actions">
          <a *ngIf="getGoogleMapsLink(selected_post)" role="button" name="button" class="btn btn-map" href="{{getGoogleMapsLink(selected_post)}}" target="_blank"><i class="fa fa-location-arrow" aria-hidden="true"></i> <b>Vai</b></a>
          <a *ngIf="getPhoneNumber(selected_post)" role="button" href="tel:{{getPhoneNumber(selected_post)}}" target="_blank" type="button" name="button" class="btn btn-phone"><i class="fa fa-phone" aria-hidden="true"></i> <b>Telefono</b></a>
          <a *ngIf="getEmailAddress(selected_post)" role="button"href="mailto:{{getEmailAddress(selected_post)}}" target="_blank" type="button" name="button" class="btn btn-email"><i class="fa fa-envelope" aria-hidden="true"></i> <b>Email</b></a>
          <a *ngIf="getEmailAddress(selected_post)" role="button" href="mailto:{{getEmailAddress(selected_post)}}" target="_blank" type="button" name="button" class="btn btn-email"><i class="fa fa-list" aria-hidden="true"></i></a>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="popup-container" [ngStyle]="{'display' : popup==='LOGIN_POPUP' ? 'block' : 'none'}">
  <div class="popup-shadow" [ngStyle]="{'display' : popup ? 'block' : 'none'}" (click)="popup=null; commonService.enableScroll()"></div>
  <div class="popup">
    <div class="popup-loader" *ngIf="AuthState.loading">
      <i class="fa fa-circle-o-notch animate loader"></i>
    </div>
    <div class="popup-content">
      <div class="popup-nav">
        <button type="button" class="close" (click)="popup=null; commonService.enableScroll()">&times;</button>Login
      </div>
      <div class="popup-header">
        <h3>Accedi per vedere il cliente</h3>
      </div>
      <div class="popup-body">
        <form (keyup.enter)="login(AuthField)">
          <div class="form-group">
            <label for="email">Indirizzo email</label>
            <input id="email" class="form-control" type="email" name="email" [ngClass]="{'error-input': AuthState.error}" [(ngModel)]="AuthField.email" [ngModelOptions]="{standalone: true}">
          </div>
          <div class="form-group">
            <label for="password">Password</label>
            <input id="password" class="form-control" type="password" name="password" [ngClass]="{'error-input': AuthState.error}" [(ngModel)]="AuthField.password" [ngModelOptions]="{standalone: true}">
          </div>
          <div class="form-group">
            <div class="error-container" *ngIf="AuthState.error">
              <span class="error">{{AuthState.error}}</span>
            </div>
          </div>
          <div class="form-group">
            <a class="btn btn-warning btn-form-login" (click)="login(AuthField)">Accedi</a>
          </div>
          <div class="form-group">
            <a class="btn btn-secondary btn-form-signup" (click)="popup='SIGNUP_POPUP';">Iscriviti</a>
          </div>
          <div class="form-group">
            <button type="button" class="btn btn-facebook btn-form-facebook" id="continueWithFacebook" (click)="continueWithFacebook('/account/profile')"><i class="fa fa-facebook-official" aria-hidden="true"></i>Continua con Facebook</button>
          </div>
        </form>
      </div>
      <div class="popup-footer">
        <span class="text">Continuando dichiari di aver letto e accetti le <a routerLink="/info/legal" target="_blank">condizioni generali e l’informativa sulla privacy</a></span>
      </div>
    </div>
  </div>
</div>
<div class="popup-container" [ngStyle]="{'display' : popup==='SIGNUP_POPUP' ? 'block' : 'none'}">
  <div class="popup-shadow" [ngStyle]="{'display' : popup ? 'block' : 'none'}" (click)="popup=null; commonService.enableScroll()"></div>
  <div class="popup">
    <div class="popup-loader" *ngIf="AuthState.loading">
      <i class="fa fa-circle-o-notch animate loader"></i>
    </div>
    <div class="popup-content">
      <div class="popup-nav">
        <button type="button" class="close" (click)="popup=null;">&times;</button>Registrazione
      </div>
      <div class="popup-header">
        <h3>Registrati per vedere il cliente</h3>
      </div>
      <div class="popup-body">
        <form (keyup.enter)="signup(AuthField)">
          <div class="row">
            <div class="form-group col-md-6">
              <label for="firstNameInput">Nome</label>
              <input type="firstname" placeholder="Nome" class="form-control" [ngClass]="{'error-input': AuthState.error}" id="firstNameInput" [(ngModel)]="AuthField.profile.firstname" [ngModelOptions]="{standalone: true}">
            </div>
            <div class="form-group col-md-6">
              <label for="lastNameInput">Cognome</label>
              <input type="lastname" placeholder="Cognome" class="form-control" [ngClass]="{'error-input': AuthState.error}" id="lastNameInput" [(ngModel)]="AuthField.profile.lastname" [ngModelOptions]="{standalone: true}">
            </div>
            <div class="form-group col-md-12">
              <label for="business-name-input">Azienda</label>
              <input class="form-control" placeholder="Azienda" type="text" [ngClass]="{'error-input': AuthState.error}" id="business-name-input" [(ngModel)]="AuthField.business.name" [ngModelOptions]="{standalone: true}">
            </div>
            <div class="form-group col-md-12">
              <label for="emailInput">Email</label>
              <input type="email" placeholder="La tua mail" class="form-control" [ngClass]="{'error-input': AuthState.error}" id="emailInput" [(ngModel)]="AuthField.email" [ngModelOptions]="{standalone: true}">
            </div>
            <div class="form-group col-md-12">
              <label for="passwordInput">Scegli una password</label>
              <input type="password" placeholder="Password" class="form-control" [ngClass]="{'error-input': AuthState.error}" id="passwordInput" [(ngModel)]="AuthField.password" [ngModelOptions]="{standalone: true}">
            </div>
            <div class="form-group col-md-12" *ngIf="AuthState.error">
              <div class="alert alert-danger" role="alert">{{AuthState.error}}</div>
            </div>
            <div class="form-group col-md-12">
              <button type="button" id="signup" class="btn btn-warning btn-form-signup" (click)="signup(AuthField)">Iscriviti</button>
            </div>
            <div class="form-group col-md-12">
              <a class="btn btn-secondary btn-form-login" (click)="popup='LOGIN_POPUP';">Accedi</a>
            </div>
            <div class="form-group col-md-12">
              <button type="button" class="btn btn-facebook btn-form-facebook" id="continueWithFacebook" (click)="continueWithFacebook('/account/profile')"><i class="fa fa-facebook-official" aria-hidden="true"></i>Continua con Facebook</button>
            </div>
          </div>
        </form>
      </div>
      <div class="popup-footer">
        <span class="text">Continuando dichiari di aver letto e accetti le <a routerLink="/info/legal" target="_blank">condizioni generali e l’informativa sulla privacy</a></span>
      </div>
    </div>
  </div>
</div>

<div class="popup-container" [ngStyle]="{'display' : popup==='NEW_CARD_POPUP' ? 'block' : 'none'}">
  <div class="popup-shadow" [ngStyle]="{'display' : popup ? 'block' : 'none'}" (click)="popup=null;"></div>
  <div class="popup">
    <div class="popup-loader" *ngIf="CardState.loading">
      <i class="fa fa-circle-o-notch animate loader"></i>
    </div>
    <div class="popup-content">
      <div class="popup-nav">
        <button type="button" class="close" (click)="popup=null;">&times;</button>Aggiungi un metodo di pagamento
      </div>
      <div class="popup-header">
        <div class="list-cards">
          <img src="../../../assets/images/visa.png" alt="Visa">
          <img src="../../../assets/images/mastercard.png" alt="Mastercard">
          <img src="../../../assets/images/americanexpress.png" alt="AmericanExpress">
          <img src="../../../assets/images/discover.png" alt="Discover">
        </div>
      </div>
      <div class="popup-body">
        <form>
          <div class="row">
            <div class="form-group col-md-12">
              <label for="firstname-input">Numero carta *</label>
              <input autocomplete="off" type="text" placeholder="Numero" class="form-control" [ngClass]="{'error-input': CardState.error}" id="numberInput" [(ngModel)]="Card.number" [ngModelOptions]="{standalone: true}">
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label for="dateInput">Scadenza *</label>
                <input autocomplete="off" type="text" placeholder="MM/AA" class="form-control" [ngClass]="{'error-input': CardState.error}" id="dateInput" [(ngModel)]="Card.exp_date" (keyup)="checkExpiry(Card.exp_date)" (change)="checkExpiry(Card.exp_date)" [ngModelOptions]="{standalone: true}">
              </div>
            </div>
            <div class="form-group col-md-6">
              <label for="numberInput">Codice di sicurezza *</label>
              <input autocomplete="off" type="text" placeholder="CVC/CVV" class="form-control" [ngClass]="{'error-input': CardState.error}" id="numberInput" [(ngModel)]="Card.cvc" [ngModelOptions]="{standalone: true}">
            </div>
          </div>
        </form>
      </div>
      <div class="popup-footer">
        <button type="button" id="next" class="btn btn-secondary" (click)="popup=null;">Annulla</button>
        <button id="addCard" type="button" class="btn btn-danger" (click)="addCardAndContinue()">Salva e Continua</button>
      </div>
    </div>
  </div>
</div>

<div class="home-container" *ngIf="id && post">
  <div class="home">
    <div class="home-content">
      <div class="home-body">
        <div class="post" *ngIf="post">
          <div class="post-content">
            <div class="post-header">
              <i class="fa fa-briefcase left-icon" aria-hidden="true"></i>
              <h1 class="post-title">{{post.title}}</h1>
              <span class="post-location">a {{checkPostLocation(post)}}</span>
            </div>
            <div class="post-body">
              <div class="post-details">
                <label>Tipo di lavoro: </label><span>Sistemazione</span>
                <label>Installazione: </label><span>manuale</span>
                <label>Applicazione: </label><span>Si</span>
              </div>
              <p class="post-description">{{post.description}}</p>
              <div class="post-client">
                <div class="detail">
                  <label>Cognome: </label><span>{{checkCustomerLastname(post)}}</span>
                </div>
                <div class="detail">
                  <label>Nome: </label><span>{{checkCustomerFirstname(post)}}</span>
                </div>
              </div>
              <div class="post-address">
                <div class="detail">
                  <label>Comune: </label><span>Busto Arsizio</span>
                </div>
                <div class="detail">
                  <label>Via: </label><span>Via***** *******lo</span>
                </div>
              </div>
            </div>
            <div class="post-footer">
              <div class="post-status">
                <span>Stato della richiesta: Attivo</span>
              </div>
              <div class="post-viewers">
                <span>234 stanno visualizzando quensta offerta.</span>
              </div>
              <div class="post-deadline">
                Rimangono 12 giorni alla chiusura
              </div>
              <div class="post-actions">
                <button type="button" class="btn btn-success" name="button" (click)="previewPurchase(post)">Vedi contatto</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
